# Library Pack å·¥å…·

è¿™æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå’Œæ‰“åŒ…åº“æ–‡ä»¶çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå°†åº“æ‰“åŒ…ä¸º SystemJS æ ¼å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **äº¤äº’å¼æ¨¡å¼**ï¼šé€šè¿‡ç•Œé¢é€‰æ‹©è¦æ„å»ºçš„åº“
- ğŸš€ **æ‰¹é‡æ„å»º**ï¼šä½¿ç”¨ `--all` å‚æ•°æ„å»ºæ‰€æœ‰åº“
- ğŸ“‹ **ç²¾ç¡®æŒ‡å®š**ï¼šé€šè¿‡ `library_name@version` æ ¼å¼æŒ‡å®šå…·ä½“åº“
- ğŸ” **æ™ºèƒ½éªŒè¯**ï¼šè‡ªåŠ¨éªŒè¯æŒ‡å®šçš„åº“æ˜¯å¦å­˜åœ¨
- ğŸ¨ **å‹å¥½è¾“å‡º**ï¼šå½©è‰²æ§åˆ¶å°è¾“å‡ºï¼Œæ¸…æ™°æ˜¾ç¤ºæ„å»ºè¿›åº¦

## å®‰è£…å’Œä½¿ç”¨

### åŸºæœ¬å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
pack build --help

# äº¤äº’å¼æ¨¡å¼ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
pack build

# æ„å»ºæ‰€æœ‰åº“
pack build --all

# æ„å»ºæŒ‡å®šåº“
pack build library_name_01@1.0.0 library_name_02@2.1.0
```

## ä½¿ç”¨æ–¹å¼

### 1. äº¤äº’å¼æ¨¡å¼

å½“ä¸æä¾›ä»»ä½•å‚æ•°æ—¶ï¼Œå·¥å…·ä¼šå¯åŠ¨äº¤äº’å¼æ¨¡å¼ï¼Œè®©æ‚¨é€šè¿‡å¤é€‰æ¡†ç•Œé¢é€‰æ‹©è¦æ„å»ºçš„åº“ï¼š

```bash
pack build
```

è¿™ä¼šæ˜¾ç¤ºç±»ä¼¼ä¸‹é¢çš„ç•Œé¢ï¼š
```
? Select library need pack (Press <space> to select, <a> to toggle all, <i> to invert selection, and <enter> to proceed)
â¯â—¯ react 18.0.0
 â—¯ vue 3.0.0
 â—¯ lodash 4.17.21
 â—¯ moment 2.29.4
```

### 2. æ„å»ºæ‰€æœ‰åº“

ä½¿ç”¨ `--all` å‚æ•°å¯ä»¥æ„å»ºæ‰€æœ‰å¯ç”¨çš„åº“ï¼š

```bash
npm run build -- --all
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
Building all libraries (15 found):
  - react@18.0.0
  - vue@3.0.0
  - lodash@4.17.21
  - moment@2.29.4
  ...
âœ… Successfully built 15 libraries
```

### 3. æ„å»ºæŒ‡å®šåº“

æ‚¨å¯ä»¥é€šè¿‡ `library_name@version` çš„æ ¼å¼æŒ‡å®šè¦æ„å»ºçš„åº“ï¼š

```bash
# æ„å»ºå•ä¸ªåº“
npm run build react@18.0.0

# æ„å»ºå¤šä¸ªåº“
npm run build react@18.0.0 vue@3.0.0 lodash@4.17.21

# æ··åˆæ„å»ºä¸åŒåº“
npm run build axios@1.5.0 moment@2.29.4 dayjs@1.11.0
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
Building specified libraries (3 found):
  - react@18.0.0
  - vue@3.0.0
  - lodash@4.17.21
âœ… Successfully built 3 libraries
```

## é”™è¯¯å¤„ç†

### åº“ä¸å­˜åœ¨çš„æƒ…å†µ

å¦‚æœæŒ‡å®šçš„åº“ä¸å­˜åœ¨ï¼Œå·¥å…·ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å¹¶åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„åº“ï¼š

```bash
npm run build nonexistent@1.0.0
```

è¾“å‡ºï¼š
```
The following libraries were not found:
  - nonexistent@1.0.0
Available libraries:
  - react@18.0.0
  - vue@3.0.0
  - lodash@4.17.21
  - moment@2.29.4
  ...
```

### ä¸­æ–­æ“ä½œ

åœ¨ä»»ä½•æ¨¡å¼ä¸‹ï¼Œæ‚¨éƒ½å¯ä»¥ä½¿ç”¨ `Ctrl + C` æ¥ä¸­æ–­æ“ä½œï¼š

```
Program interrupted by Command + C (SIGINT).
```

## é¡¹ç›®ç»“æ„

å·¥å…·ä¼šåœ¨ä»¥ä¸‹ç›®å½•ç»“æ„ä¸­æŸ¥æ‰¾åº“ï¼š

```
libs/
â”œâ”€â”€ library_name_01/
â”‚   â””â”€â”€ version/
â”‚       â”œâ”€â”€ dep.manifest.yml  # åº“çš„æ¸…å•æ–‡ä»¶
â”‚       â””â”€â”€ main.js          # å…¥å£æ–‡ä»¶
â”œâ”€â”€ library_name_02/
â”‚   â””â”€â”€ version/
â”‚       â”œâ”€â”€ dep.manifest.yml
â”‚       â””â”€â”€ main.js
â””â”€â”€ ...
```

æ„å»ºåçš„æ–‡ä»¶ä¼šè¾“å‡ºåˆ°ï¼š

```
dist/
â”œâ”€â”€ library_name_01/
â”‚   â””â”€â”€ version/
â”‚       â”œâ”€â”€ main.js           # æ„å»ºåçš„ JS æ–‡ä»¶
â”‚       â”œâ”€â”€ main.css          # æ ·å¼æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
â”‚       â””â”€â”€ dep.manifest.json # æ„å»ºæ¸…å•
â””â”€â”€ ...
```

## æ¸…å•æ–‡ä»¶æ ¼å¼

æ¯ä¸ªåº“éƒ½éœ€è¦ä¸€ä¸ª `dep.manifest.yml` æ–‡ä»¶æ¥æè¿°åº“çš„ä¿¡æ¯ï¼š

```yaml
name: library-name
version: 1.0.0
schema: "1.0"
dependencies:
  react: "^18.0.0"
  lodash: "^4.17.21"
```

æ„å»ºåä¼šç”Ÿæˆå¯¹åº”çš„ JSON æ ¼å¼æ¸…å•æ–‡ä»¶ã€‚

## é«˜çº§åŠŸèƒ½

### ä¾èµ–ç®¡ç†

å·¥å…·ä¼šè‡ªåŠ¨å¤„ç†åº“ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶åœ¨æ„å»ºæ—¶ç”Ÿæˆæ­£ç¡®çš„å¤–éƒ¨ä¾èµ–æ˜ å°„ã€‚

### CSS æ”¯æŒ

å¦‚æœåº“åŒ…å« CSS æ–‡ä»¶ï¼Œæ„å»ºåçš„æ¸…å•ä¼šæ ‡è®° `css: true`ï¼Œè¡¨ç¤ºè¯¥åº“åŒ…å«æ ·å¼æ–‡ä»¶ã€‚

### ç¯å¢ƒå˜é‡

æ„å»ºæ—¶ä¼šè‡ªåŠ¨è®¾ç½® `NODE_ENV=production` ä»¥ç¡®ä¿ç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–æ„å»ºã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é—®é¢˜**ï¼šç¡®ä¿å¯¹ `libs/` å’Œ `dist/` ç›®å½•æœ‰è¯»å†™æƒé™
2. **ä¾èµ–ç¼ºå¤±**ï¼šç¡®ä¿å·²ç»å®‰è£…äº†æ‰€éœ€çš„ npm ä¾èµ–
3. **æ¸…å•æ–‡ä»¶**ï¼šç¡®ä¿æ¯ä¸ªåº“ç›®å½•ä¸‹éƒ½æœ‰æ­£ç¡®çš„ `dep.manifest.yml` æ–‡ä»¶

### è°ƒè¯•æ¨¡å¼

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ£€æŸ¥æ„å»ºæ—¥å¿—è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

## å¼€å‘è¯´æ˜

- ä½¿ç”¨ TypeScript å¼€å‘
- åŸºäº Commander.js è¿›è¡Œå‘½ä»¤è¡Œè§£æ
- ä½¿ç”¨ Inquirer.js æä¾›äº¤äº’å¼ç•Œé¢
- æ”¯æŒ SystemJS æ¨¡å—æ ¼å¼è¾“å‡º
